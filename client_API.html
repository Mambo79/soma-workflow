<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Python API &mdash; soma-workflow version 2.8 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/icon_small.ico"/>
    <link rel="top" title="soma-workflow version 2.8 documentation" href="index.html" />
    <link rel="next" title="Installation and configuration" href="install_config.html" />
    <link rel="prev" title="Workflow creation API" href="workflow_creation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="install_config.html" title="Installation and configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="workflow_creation.html" title="Workflow creation API"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">soma-workflow version 2.8 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="python-api">
<span id="client-api"></span><h1>Python API<a class="headerlink" href="#python-api" title="Permalink to this headline">¶</a></h1>
<p>The submission, monitoring and control of Workflow, Job and FileTransfer can be
done through the client.WorkflowController interface.</p>
<p>This page presents the documentation of the client.WorkflowController class.</p>
<dl class="class">
<dt id="client.WorkflowController">
<em class="property">class </em><tt class="descclassname">client.</tt><tt class="descname">WorkflowController</tt><big>(</big><em>object</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController" title="Permalink to this definition">¶</a></dt>
<dd><p>Submission, control and monitoring of Job, FileTransfer and Workflow
objects.</p>
</dd></dl>

<div class="contents local topic" id="workflowcontroller-api">
<p class="topic-title first">WorkflowController API</p>
<ul class="simple">
<li><a class="reference internal" href="#setup-the-connection-with-the-computing-resource" id="id4">Setup the connection with the computing resource</a></li>
<li><a class="reference internal" href="#submission-registration" id="id5">Submission / Registration</a></li>
<li><a class="reference internal" href="#user-s-workflows-jobs-and-filetransfers-retrieval" id="id6">User&#8217;s Workflows, Jobs, and FileTransfers retrieval</a></li>
<li><a class="reference internal" href="#monitoring" id="id7">Monitoring</a><ul>
<li><a class="reference internal" href="#workflows" id="id8">Workflows</a></li>
<li><a class="reference internal" href="#jobs" id="id9">Jobs</a></li>
<li><a class="reference internal" href="#file-transfers" id="id10">File Transfers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#control" id="id11">Control</a><ul>
<li><a class="reference internal" href="#id1" id="id12">Workflows</a></li>
<li><a class="reference internal" href="#id2" id="id13">Jobs</a></li>
<li><a class="reference internal" href="#id3" id="id14">File Transfers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#helper" id="id15">Helper</a></li>
</ul>
</div>
<div class="section" id="setup-the-connection-with-the-computing-resource">
<h2><a class="toc-backref" href="#id4">Setup the connection with the computing resource</a><a class="headerlink" href="#setup-the-connection-with-the-computing-resource" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="client.WorkflowController.__init__">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">__init__</tt><big>(</big><em>resource_id=None</em>, <em>login=None</em>, <em>password=None</em>, <em>config=None</em>, <em>rsa_key_pass=None</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up the connection to the computing resource.
Looks for a soma-workflow configuration file (if not specified in the
<em>config</em> argument).</p>
<dl class="docutils">
<dt>resource_id: <em>string</em></dt>
<dd>Identifier of the computing resource to connect to.
If None, the number of cpu of the current machine is detected and
the basic scheduler is lauched.</dd>
<dt>login: <em>string</em></dt>
<dd>Required if the computing resource is remote.</dd>
<dt>password: <em>string</em></dt>
<dd>Required if the computing resource is remote and not RSA key where
configured to log on the remote machine with ssh.</dd>
<dt>config: <em>configuration.Configuration</em></dt>
<dd>Optional configuration.</dd>
<dt>rsa_key_pass: <em>string</em></dt>
<dd>Required if the RSA key is protected with a password.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The login and password are only required for a remote computing
resource.</p>
</div>
</dd></dl>

</div>
<div class="section" id="submission-registration">
<h2><a class="toc-backref" href="#id5">Submission / Registration</a><a class="headerlink" href="#submission-registration" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="client.WorkflowController.submit_workflow">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">submit_workflow</tt><big>(</big><em>workflow</em>, <em>expiration_date=None</em>, <em>name=None</em>, <em>queue=None</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.submit_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.submit_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits a workflow and returns a workflow identifier.</p>
<p>Parameters:</p>
<dl class="docutils">
<dt>workflow: <em>client.Workflow</em></dt>
<dd>Workflow description.</dd>
<dt>expiration_date: <em>datetime.datetime</em></dt>
<dd>After this date the workflow will be deleted.</dd>
<dt>name: <em>string</em></dt>
<dd>Optional workflow name.</dd>
<dt>queue: <em>string</em></dt>
<dd>Optional name of the queue where to submit jobs. If it is not
specified the jobs will be submitted to the default queue.</dd>
</dl>
<p>Returns:</p>
<p>Workflow identifier: int</p>
<p>Raises <em>WorkflowError</em> or <em>JobError</em> if the workflow is not correct.</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.submit_job">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">submit_job</tt><big>(</big><em>job</em>, <em>queue=None</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.submit_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.submit_job" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>deprecated since version 2.4:</strong> Use submit_workflow instead.</p>
<p>Submits a job which is not part of a workflow.
Returns a job identifier.</p>
<p>If the job used transfered files the list of involved file transfer
<strong>must be</strong> specified setting the arguments: <em>referenced_input_files</em>
and <em>referenced_output_files</em>.</p>
<p>Each path must be reachable from the computing resource.</p>
<p>job: <em>client.Job</em></p>
<dl class="docutils">
<dt>queue: <em>string</em></dt>
<dd>Name of the queue where to submit the jobs. If it is not
specified the job will be submitted to the default queue.</dd>
</dl>
<p>Returns:</p>
<p>Job identifier: string</p>
<p>Raises <em>JobError</em> if the job is not correct.</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.register_transfer">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">register_transfer</tt><big>(</big><em>file_transfer</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.register_transfer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.register_transfer" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a file transfer which is not part of a workflow and returns a
file transfer identifier.</p>
<p>file_transfer: <em>client.FileTransfer</em></p>
<p>returns: <em>EngineTransfer</em></p>
</dd></dl>

</div>
<div class="section" id="user-s-workflows-jobs-and-filetransfers-retrieval">
<h2><a class="toc-backref" href="#id6">User&#8217;s Workflows, Jobs, and FileTransfers retrieval</a><a class="headerlink" href="#user-s-workflows-jobs-and-filetransfers-retrieval" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="client.WorkflowController.workflow">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">workflow</tt><big>(</big><em>workflow_id</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>workflow_id: <em>workflow_identifier</em></p>
<p>returns:</p>
<p>Workflow</p>
<p>Raises <em>UnknownObjectError</em> if the workflow_id is not valid</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.workflows">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">workflows</tt><big>(</big><em>workflow_ids=None</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.workflows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.workflows" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists the identifiers and general information about all the workflows
submitted by the user, or about the workflows specified in the
<em>workflow_ids</em> argument.</p>
<ul>
<li><p class="first">workflow_ids <em>sequence of workflow identifiers</em></p>
</li>
<li><dl class="first docutils">
<dt>returns: <em>dictionary: workflow identifier -&gt; tuple(date, string)</em></dt>
<dd><p class="first last">workflow_id -&gt; (workflow_name, expiration_date)</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.jobs">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">jobs</tt><big>(</big><em>job_ids=None</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.jobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists the identifiers and general information about all the jobs
submitted by the user and which are not part of a workflow, or about
the jobs specified in the <em>job_ids</em> argument.</p>
<ul>
<li><p class="first">job_ids <em>sequence of job identifiers</em></p>
</li>
<li><dl class="first docutils">
<dt>returns: <em>dictionary: job identifiers -&gt; tuple(string, string, date)</em></dt>
<dd><p class="first last">job_id -&gt; (name, command, submission date)</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.transfers">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">transfers</tt><big>(</big><em>transfer_ids=None</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.transfers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.transfers" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists the identifiers and information about all the user&#8217;s file
transfers which are not part of a workflow or about the file transfers
specified in the <em>transfer_ids</em> argument.</p>
<ul>
<li><p class="first">transfer_ids <em>sequence of FileTransfer identifiers</em></p>
</li>
<li><dl class="first docutils">
<dt>returns: <em>dictionary: string -&gt; tuple(string, date, None or sequence of string)</em></dt>
<dd><dl class="first last docutils">
<dt>transfer_id -&gt; (</dt>
<dd><ul class="first last simple">
<li>client_path: client file or directory path</li>
<li>expiration_date: after this date the file copied
on the computing resource and all the transfer
information will be deleted, unless an existing
job has declared this file as output or input.</li>
<li>client_paths: sequence of file or directory path
or None)</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>
</dd></dl>

</div>
<div class="section" id="monitoring">
<h2><a class="toc-backref" href="#id7">Monitoring</a><a class="headerlink" href="#monitoring" title="Permalink to this headline">¶</a></h2>
<div class="section" id="workflows">
<h3><a class="toc-backref" href="#id8">Workflows</a><a class="headerlink" href="#workflows" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="client.WorkflowController.workflow_status">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">workflow_status</tt><big>(</big><em>workflow_id</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.workflow_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.workflow_status" title="Permalink to this definition">¶</a></dt>
<dd><ul>
<li><p class="first">workflow_id <em>workflow identifier</em></p>
</li>
<li><dl class="first docutils">
<dt>returns: <em>string or None</em></dt>
<dd><p class="first last">Status of the workflow: see <a class="reference internal" href="status_list.html#workflow-status"><em>Workflow status</em></a> or the
constants.WORKFLOW_STATUS list.</p>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the workflow_id is not valid</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.workflow_elements_status">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">workflow_elements_status</tt><big>(</big><em>workflow_id</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.workflow_elements_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.workflow_elements_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets back the status of all the workflow elements at once, minimizing
the communication with the server and request to the database.
TO DO =&gt; make it more user friendly.</p>
<ul>
<li><p class="first">workflow_id <em>workflow identifier</em></p>
</li>
<li><dl class="first docutils">
<dt>returns: tuple:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>sequence of tuple</dt>
<dd><dl class="first last docutils">
<dt>(job_id, status, queue, exit_info,</dt>
<dd><p class="first last">(submission_date, execution_date, ending_date)),</p>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sequence of tuple</dt>
<dd><p class="first last">(transfer_id, (status, progression_info)),</p>
</dd>
</dl>
</li>
<li><p class="first">workflow_status,</p>
</li>
<li><p class="first">workflow_queue,</p>
</li>
<li><p class="first">sequence of tuple (temp_path_id, engine_path, status)</p>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the workflow_id is not valid</p>
</dd></dl>

</div>
<div class="section" id="jobs">
<h3><a class="toc-backref" href="#id9">Jobs</a><a class="headerlink" href="#jobs" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="client.WorkflowController.job_status">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">job_status</tt><big>(</big><em>job_id</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.job_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.job_status" title="Permalink to this definition">¶</a></dt>
<dd><ul>
<li><p class="first">job_id <em>job identifier</em></p>
</li>
<li><dl class="first docutils">
<dt>returns: <em>string</em></dt>
<dd><p class="first last">Status of the job: see <a class="reference internal" href="status_list.html#job-status"><em>Job status</em></a> or the list
constants.JOB_STATUS.</p>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the job_id is not valid</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.job_termination_status">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">job_termination_status</tt><big>(</big><em>job_id</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.job_termination_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.job_termination_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Information related to the end of the job.</p>
<ul>
<li><p class="first">job_id <em>job identifier</em></p>
</li>
<li><dl class="first docutils">
<dt>returns: <em>tuple(string, int or None, string or None, string) or None</em></dt>
<dd><ul class="first last simple">
<li>exit status: status of the terminated job: see
<a class="reference internal" href="status_list.html#job-exit-status"><em>Job exit status</em></a> or the constants.JOB_EXIT_STATUS list.</li>
<li>exit value: operating system exit code of the job if the job
terminated normally.</li>
<li>terminating signal: representation of the signal that caused the
termination of the job if the job terminated due to the receipt
of a signal.</li>
<li>resource usage: resource usage information provided as an array
of strings where each string complies with the format
&lt;name&gt;=&lt;value&gt;.
The information provided depends on the DRMS and DRMAA
implementation.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the job_id is not valid</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.retrieve_job_stdouterr">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">retrieve_job_stdouterr</tt><big>(</big><em>job_id</em>, <em>stdout_file_path</em>, <em>stderr_file_path=None</em>, <em>buffer_size=262144</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.retrieve_job_stdouterr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.retrieve_job_stdouterr" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies the job standard output and error to specified file.</p>
<ul>
<li><p class="first">job_id <em>job identifier</em></p>
</li>
<li><dl class="first docutils">
<dt>stdout_file_path <em>string</em></dt>
<dd><p class="first last">Path of the file where to copy the standard output.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>stderr_file_path <em>string</em></dt>
<dd><p class="first last">Path of the file where to copy the standard error.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>buffer_size <em>int</em></dt>
<dd><p class="first last">The file is transfered piece by piece of size buffer_size.</p>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the job_id is not valid</p>
</dd></dl>

</div>
<div class="section" id="file-transfers">
<h3><a class="toc-backref" href="#id10">File Transfers</a><a class="headerlink" href="#file-transfers" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="client.WorkflowController.transfer_status">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">transfer_status</tt><big>(</big><em>transfer_id</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.transfer_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.transfer_status" title="Permalink to this definition">¶</a></dt>
<dd><p>File transfer status and information related to the transfer progress.</p>
<ul>
<li><p class="first">transfer_id <em>transfer identifier</em></p>
</li>
<li><dl class="first docutils">
<dt>returns: <em>tuple(transfer_status or None, tuple or None)</em></dt>
<dd><ul class="first last simple">
<li>Status of the file transfer : see <a class="reference internal" href="status_list.html#file-transfer-status"><em>File Transfer status</em></a> or
the constants.FILE_TRANSFER_STATUS list.</li>
<li>None if the transfer status in not
constants.TRANSFERING_FROM_CLIENT_TO_CR or
constants.TRANSFERING_FROM_CR_TO_CLIENT.
tuple (file size, size already transfered) if it is a file
transfer.
tuple (cumulated size, sequence of tuple (relative_path,
file_size, size already transfered) if it is a directory
transfer.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the transfer_id is not valid</p>
</dd></dl>

</div>
</div>
<div class="section" id="control">
<h2><a class="toc-backref" href="#id11">Control</a><a class="headerlink" href="#control" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id12">Workflows</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="client.WorkflowController.stop_workflow">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">stop_workflow</tt><big>(</big><em>workflow_id</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.stop_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.stop_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops a workflow.
The running jobs will be killed.
The jobs in queues will be removed from queues.
It will be possible to restart the workflow afterwards.</p>
<blockquote>
<div><ul class="simple">
<li>returns: <em>boolean</em></li>
</ul>
<blockquote>
<div>return True if the running jobs were killed and False
if some jobs are possibly still running on the computing resource
despite the workflow was stopped.</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.restart_workflow">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">restart_workflow</tt><big>(</big><em>workflow_id</em>, <em>queue=None</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.restart_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.restart_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Restarts the jobs of the workflow which failed. The jobs will be
submitted again.
The workflow status has to be constants.WORKFLOW_DONE.</p>
<ul>
<li><p class="first">workflow_id <em>workflow identifier</em></p>
</li>
<li><dl class="first docutils">
<dt>queue <em>string</em></dt>
<dd><p class="first last">Optional name of the queue where to submit jobs. If it is not
specified the jobs will be submitted to the default queue.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>returns: <em>boolean</em></dt>
<dd><p class="first last">True if some jobs were restarted.</p>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the workflow_id is not valid</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.delete_workflow">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">delete_workflow</tt><big>(</big><em>workflow_id</em>, <em>force=True</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.delete_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.delete_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the workflow and all its associated elements (FileTransfers and
Jobs). The worklfow_id will become invalid and can not be used anymore.
The workflow jobs which are running will be killed.
If force is set to True: the call will block until the workflow is
deleted. With force set to True, if the workflow can not be deleted
properly it is deleted from Soma-workflow database. However, if some
jobs are still running they are not be killed. In this case the return
value is False.</p>
<ul class="simple">
<li>workflow_id <em>workflow_identifier</em></li>
<li>force <em>boolean</em></li>
<li>returns: <em>boolean</em></li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the workflow_id is not valid</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.change_workflow_expiration_date">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">change_workflow_expiration_date</tt><big>(</big><em>workflow_id</em>, <em>new_expiration_date</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.change_workflow_expiration_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.change_workflow_expiration_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a new expiration date for the workflow.</p>
<ul>
<li><p class="first">workflow_id <em>workflow identifier</em></p>
</li>
<li><p class="first">new_expiration_date <em>datetime.datetime</em></p>
</li>
<li><dl class="first docutils">
<dt>returns: <em>boolean</em></dt>
<dd><p class="first last">True if the expiration date was changed.</p>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the workflow_id is not valid</p>
</dd></dl>

</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id13">Jobs</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="client.WorkflowController.wait_job">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">wait_job</tt><big>(</big><em>job_ids</em>, <em>timeout=-1</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.wait_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.wait_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Waits for all the specified jobs to finish.</p>
<ul>
<li><dl class="first docutils">
<dt>job_ids <em>sequence of job identifier</em></dt>
<dd><p class="first last">Jobs to wait for.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>timeout <em>int</em></dt>
<dd><p class="first last">The call to wait_job exits before timeout seconds.
A negative value means that the method will wait indefinetely.</p>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the job_id is not valid</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.kill_job">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">kill_job</tt><big>(</big><em>job_id</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.kill_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.kill_job" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>deprecated since version 2.4:</strong> Use stop_workflow instead.</p>
<p>Kills a running job. The job will not be deleted from the system (the
job identifier remains valid).
Use the restart_job method to restart the job.</p>
<p>Raises <em>UnknownObjectError</em> if the job_id is not valid</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.restart_job">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">restart_job</tt><big>(</big><em>job_id</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.restart_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.restart_job" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>deprecated since version 2.4:</strong> Use restart_workflow instead.</p>
<p>Restarts a job which status is constants.FAILED or constants.WARNING.</p>
<ul>
<li><p class="first">job_id <em>job identifier</em></p>
</li>
<li><dl class="first docutils">
<dt>returns: <em>boolean</em></dt>
<dd><p class="first last">True if the job was restarted.</p>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the job_id is not valid</p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.delete_job">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">delete_job</tt><big>(</big><em>job_id</em>, <em>force=True</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.delete_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.delete_job" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>deprecated since version 2.4:</strong> Use delete_workflow instead.</p>
<p>Deletes a job which is not part of a workflow.
The job_id will become invalid and can not be used anymore.
The job is killed if it is running.</p>
<p>Raises <em>UnknownObjectError</em> if the job_id is not valid</p>
<ul class="simple">
<li>returns: <em>boolean</em>
If force is True: return True if the running jobs were killed and
False if some jobs are possibly still running on the computing
resource despite the workflow doesn&#8217;t exist.</li>
</ul>
</dd></dl>

</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id14">File Transfers</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="client.WorkflowController.transfer_files">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">transfer_files</tt><big>(</big><em>transfer_ids</em>, <em>buffer_size=262144</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.transfer_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.transfer_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfer file(s) associated to the transfer_id.
If the files are only located on the client side (that is the transfer
status is constants.FILES_ON_CLIENT) the file(s) will be transfered
from the client to the computing resource.
If the files are located on the computing resource side (that is the
transfer status is constants.FILES_ON_CR or
constants.FILES_ON_CLIENT_AND_CR)
the files will be transfered from the computing resource to the client.</p>
<ul>
<li><p class="first">transfer_id <em>FileTransfer identifier</em></p>
</li>
<li><dl class="first docutils">
<dt>buffer_size <em>int</em></dt>
<dd><p class="first last">Depending on the transfer method, the files can be transfered piece
by piece. The size of each piece can be tuned using the buffer_size
argument.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>returns: <em>boolean</em></dt>
<dd><p class="first last">The transfer was done. (TBI right error management)</p>
</dd>
</dl>
</li>
</ul>
<p>Raises <em>UnknownObjectError</em> if the transfer_id is not valid
#Raises <em>TransferError</em></p>
</dd></dl>

<dl class="method">
<dt id="client.WorkflowController.delete_transfer">
<tt class="descclassname">WorkflowController.</tt><tt class="descname">delete_transfer</tt><big>(</big><em>transfer_id</em><big>)</big><a class="reference internal" href="_modules/client.html#WorkflowController.delete_transfer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.WorkflowController.delete_transfer" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the FileTransfer and the associated files and directories on
the computing resource side. The transfer_id will become invalid and
can not be used anymore. If some jobs reference the FileTransfer as an
input or an output the FileTransfer will not be deleted immediately but
as soon as these jobs will be deleted.</p>
<p>Raises <em>UnknownObjectError</em> if the transfer_id is not valid</p>
</dd></dl>

</div>
</div>
<div class="section" id="helper">
<h2><a class="toc-backref" href="#id15">Helper</a><a class="headerlink" href="#helper" title="Permalink to this headline">¶</a></h2>
<dl class="staticmethod">
<dt id="client.Helper.list_failed_jobs">
<em class="property">static </em><tt class="descclassname">Helper.</tt><tt class="descname">list_failed_jobs</tt><big>(</big><em>workflow_id</em>, <em>wf_ctrl</em>, <em>include_aborted_jobs=False</em>, <em>include_user_killed_jobs=False</em><big>)</big><a class="reference internal" href="_modules/client.html#Helper.list_failed_jobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Helper.list_failed_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>To spot the problematic jobs in a workflow.</p>
<ul class="simple">
<li>workflow_id <em>workflow identifier</em></li>
<li>include_aborted_jobs <em>boolean</em>
Include the jobs which exit status is constants.EXIT_ABORTED
and constants.EXIT_NOTRUN</li>
<li>include_user_killed_jobs <em>boolean</em>
Include the jobs which exit status is constants.USER_KILLED</li>
<li>returns: <em>list of job identifier</em>
Return the list of id of job which status is constants.FAILED
or which exit value is not 0.</li>
</ul>
</dd></dl>

<dl class="staticmethod">
<dt id="client.Helper.delete_all_workflows">
<em class="property">static </em><tt class="descclassname">Helper.</tt><tt class="descname">delete_all_workflows</tt><big>(</big><em>wf_ctrl</em>, <em>force=True</em><big>)</big><a class="reference internal" href="_modules/client.html#Helper.delete_all_workflows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Helper.delete_all_workflows" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all the workflows.
If force is set to True: the call will block until the workflows are
deleted. With force set to True, if a workflow can not be deleted
properly it is deleted from Soma-workflow database. However, if some
jobs are still running they will not be killed. In this case the return
value is False.</p>
<ul class="simple">
<li>wf_ctrl <em>client.WorkflowController</em></li>
<li>force <em>boolean</em></li>
<li>returns: <em>boolean</em></li>
</ul>
</dd></dl>

<dl class="staticmethod">
<dt id="client.Helper.wait_workflow">
<em class="property">static </em><tt class="descclassname">Helper.</tt><tt class="descname">wait_workflow</tt><big>(</big><em>workflow_id</em>, <em>wf_ctrl</em><big>)</big><a class="reference internal" href="_modules/client.html#Helper.wait_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Helper.wait_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Waits for workflow execution to end.</p>
<ul class="simple">
<li>workflow_id <em>workflow identifier</em></li>
<li>wf_ctrl <em>client.WorkflowController</em></li>
</ul>
</dd></dl>

<dl class="staticmethod">
<dt id="client.Helper.transfer_input_files">
<em class="property">static </em><tt class="descclassname">Helper.</tt><tt class="descname">transfer_input_files</tt><big>(</big><em>workflow_id</em>, <em>wf_ctrl</em>, <em>buffer_size=262144</em><big>)</big><a class="reference internal" href="_modules/client.html#Helper.transfer_input_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Helper.transfer_input_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfers all the input files of a workflow.</p>
<ul>
<li><p class="first">workflow_id <em>workflow identifier</em></p>
</li>
<li><p class="first">wf_ctrl <em>client.WorkflowController</em></p>
</li>
<li><dl class="first docutils">
<dt>buffer_size <em>int</em></dt>
<dd><p class="first last">Depending on the transfer method, the files can be transfered piece
by piece. The size of each piece can be tuned using the buffer_size
argument.</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="staticmethod">
<dt id="client.Helper.transfer_output_files">
<em class="property">static </em><tt class="descclassname">Helper.</tt><tt class="descname">transfer_output_files</tt><big>(</big><em>workflow_id</em>, <em>wf_ctrl</em>, <em>buffer_size=262144</em><big>)</big><a class="reference internal" href="_modules/client.html#Helper.transfer_output_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Helper.transfer_output_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfers all the output files of a workflow which are ready to
transfer.</p>
<ul>
<li><p class="first">workflow_id <em>workflow identifier</em></p>
</li>
<li><p class="first">wf_ctrl <em>client.WorkflowController</em></p>
</li>
<li><dl class="first docutils">
<dt>buffer_size <em>int</em></dt>
<dd><p class="first last">Depending on the transfer method, the files can be transfered piece
by piece. The size of each piece can be tuned using the buffer_size
argument.</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="staticmethod">
<dt id="client.Helper.serialize">
<em class="property">static </em><tt class="descclassname">Helper.</tt><tt class="descname">serialize</tt><big>(</big><em>file_path</em>, <em>workflow</em><big>)</big><a class="reference internal" href="_modules/client.html#Helper.serialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Helper.serialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a workflow to a file.
Uses JSON format if Python &gt;= 2.6, Python pickle otherwise.</p>
<ul class="simple">
<li>file_path <em>String</em></li>
<li>workflow <em>client.Workflow</em></li>
</ul>
<p>Raises <em>SerializationError</em></p>
</dd></dl>

<dl class="staticmethod">
<dt id="client.Helper.unserialize">
<em class="property">static </em><tt class="descclassname">Helper.</tt><tt class="descname">unserialize</tt><big>(</big><em>file_path</em><big>)</big><a class="reference internal" href="_modules/client.html#Helper.unserialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Helper.unserialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a workflow from a file.
Opens JSON format or pickle if Python &gt;= 2.6, only Python pickle
otherwise (see the method: Helper.convert_wf_file_for_p2_5).</p>
<ul class="simple">
<li>file_path <em>String</em></li>
<li>returns: <em>client.Workflow</em></li>
</ul>
<p>Raises <em>SerializationError</em></p>
</dd></dl>

<dl class="staticmethod">
<dt id="client.Helper.convert_wf_file_for_p2_5">
<em class="property">static </em><tt class="descclassname">Helper.</tt><tt class="descname">convert_wf_file_for_p2_5</tt><big>(</big><em>origin_file_path</em>, <em>target_file_path</em><big>)</big><a class="reference internal" href="_modules/client.html#Helper.convert_wf_file_for_p2_5"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Helper.convert_wf_file_for_p2_5" title="Permalink to this definition">¶</a></dt>
<dd><p>This method requires Python &gt;= 2.6.
It converts a workflow file created using Python &gt;= 2.6 to workflow
file usable in Python 2.5.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo_white_small.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Python API</a><ul>
<li><a class="reference internal" href="#setup-the-connection-with-the-computing-resource">Setup the connection with the computing resource</a></li>
<li><a class="reference internal" href="#submission-registration">Submission / Registration</a></li>
<li><a class="reference internal" href="#user-s-workflows-jobs-and-filetransfers-retrieval">User&#8217;s Workflows, Jobs, and FileTransfers retrieval</a></li>
<li><a class="reference internal" href="#monitoring">Monitoring</a><ul>
<li><a class="reference internal" href="#workflows">Workflows</a></li>
<li><a class="reference internal" href="#jobs">Jobs</a></li>
<li><a class="reference internal" href="#file-transfers">File Transfers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#control">Control</a><ul>
<li><a class="reference internal" href="#id1">Workflows</a></li>
<li><a class="reference internal" href="#id2">Jobs</a></li>
<li><a class="reference internal" href="#id3">File Transfers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#helper">Helper</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="workflow_creation.html"
                        title="previous chapter">Workflow creation API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="install_config.html"
                        title="next chapter">Installation and configuration</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/client_API.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="install_config.html" title="Installation and configuration"
             >next</a> |</li>
        <li class="right" >
          <a href="workflow_creation.html" title="Workflow creation API"
             >previous</a> |</li>
        <li><a href="index.html">soma-workflow version 2.8 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011 CEA, Neurospin, France, CATI, France.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>