

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Soma-workflow concepts &mdash; soma-workflow developement version documentation</title>
    
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="shortcut icon" href="static/icon_small.png"/>
    <link rel="top" title="soma-workflow developement version documentation" href="index.html" />
    <link rel="next" title="Graphical User Interface" href="gui.html" />
    <link rel="prev" title="Soma-workflow: A unified and simple interface to parallel computing resource" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="gui.html" title="Graphical User Interface"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Soma-workflow: A unified and simple interface to parallel computing resource"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">soma-workflow developement version documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="soma-workflow-concepts">
<span id="concepts"></span><h1>Soma-workflow concepts<a class="headerlink" href="#soma-workflow-concepts" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="id1">
<p class="topic-title first">Soma-workflow concepts</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id2">Overview</a></li>
<li><a class="reference internal" href="#quick-start-with-the-mono-process-application" id="id3">Quick start with the mono process application</a></li>
<li><a class="reference internal" href="#more-features-with-the-client-server-application" id="id4">More features with the client-server application</a><ul>
<li><a class="reference internal" href="#file-transfer" id="id5">File Transfer</a></li>
<li><a class="reference internal" href="#shared-resource-path" id="id6">Shared Resource Path</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id2">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Soma-workflow was built to make easier the use of parallel computing resources
for researchers.</p>
<p>Although Soma-workflow can be used to run individual jobs, it focuses on the
execution of coarse-grained parallelized computational processes which are made
of &#8220;long&#8221; sub-tasks (from about a minute to several days or weeks) which do
not need to communicate together.</p>
<p>The coarse-grained parallelized computational processes are described by
executable <strong>workflows</strong>. Each sub-task is described by a program command line
(any program) and is called <strong>job</strong>. A workflow description includes the
definition of a set of job and their execution dependencies.</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="images/workflow_example.png"><img alt="images/workflow_example.png" src="images/workflow_example.png" style="width: 600.0px; height: 196.8px;" /></a>
<p class="caption"><em>Workflow example. The jobs are represented by gray boxes and the
dependencies by arrows. A workflow organizes the execution of a set
of jobs defining execution dependencies between jobs. A dependency from a
job A to a job B means that the job A will not start before the job B is
done.</em></p>
</div>
</div></blockquote>
<p>These workflows can be created directly by the user or generated by
external software which provide a higher level description of workflows (semantic
description of sub-task, typed input and output...), like
<a class="reference external" href="http://brainvisa.info">BrainVISA</a> for example.
<strong>See</strong> <a class="reference internal" href="workflow_creation.html#workflow-creation-api"><em>Workflow creation API</em></a>.</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="images/position.png"><img alt="images/position.png" src="images/position.png" style="width: 261.5px; height: 331.0px;" /></a>
<p class="caption"><em>Position of Soma-workflow: the workflows can be created by user or generated by external software.</em></p>
</div>
<div class="figure">
<a class="reference internal image-reference" href="images/API_overview.png"><img alt="images/API_overview.png" src="images/API_overview.png" style="width: 509.5px; height: 246.5px;" /></a>
<p class="caption"><em>Example of the simple creation a workflow using the Python API.</em></p>
</div>
</div></blockquote>
<p>Soma-workflow interacts with computing resources, to execute,
control and monitor workflows and jobs:</p>
<blockquote>
<div><ul class="simple">
<li><strong>execution</strong>: Soma-workflow submits automatically each workflow job as soon as possible considering the execution dependencies.</li>
<li><strong>monitoring</strong>: the current status of each job is available at any time (in the queue, running, done...)</li>
<li><strong>control</strong>: the jobs can be canceled or killed. The workflows can be stopped and restarted.</li>
</ul>
</div></blockquote>
<p>All these functionalities are available using the <a class="reference internal" href="client_API.html#client-api"><em>Python API</em></a> or the <a class="reference internal" href="gui.html#gui"><em>Graphical User Interface</em></a> (GUI).
The GUI is especially of interest to monitor workflows execution.</p>
<p>With the same interfaces (API and GUI), Soma-workflow enables the interaction with a wide range
of computing resources:</p>
<blockquote>
<div><ul class="simple">
<li>multiple core machine</li>
<li>cluster via <a class="reference external" href="http://www.drmaa.org/">DRMAA</a>  (unified interface for DRMS)</li>
<li><strong>New in version 2.4:</strong> cluster via MPI (beta version), c.f. <a class="reference internal" href="MPI_workflow_runner.html#mpi-workflow-runner"><em>MPI workflow runner &#8212;beta&#8212;</em></a></li>
</ul>
</div></blockquote>
<p>Note that Soma-workflow is not a resource manager it has to interact with the
system managing the computing resource (<strong>DRMS</strong>: Distributed Resource
Management System) if it exists.</p>
<p>Soma-workflow enables the user to use <strong>remote computing resources</strong>. The communication is
done transparently for the user and securely within a ssh tunnel. In case the
computing resource and the user&#8217;s machine do not have a shared file system,
Soma-workflow provides several tools:</p>
<blockquote>
<div><ul class="simple">
<li>File transfers: allow the transfer of files or directories from or to the remote resource. The file transfers status are taken into account when a workflow is executed.</li>
<li>Shared resource path: maps a path which is valid on the user machine with a path which is valid on the computing resource thanks to &#8220;translations&#8221; files.</li>
</ul>
</div></blockquote>
<p>The file transfer and shared resource path objects can be used instead of any path
in the definition of jobs or workflows (see <a class="reference internal" href="examples.html#examples"><em>Examples</em></a>).</p>
</div>
<div class="section" id="quick-start-with-the-mono-process-application">
<span id="quick-start"></span><h2><a class="toc-backref" href="#id3">Quick start with the mono process application</a><a class="headerlink" href="#quick-start-with-the-mono-process-application" title="Permalink to this headline">¶</a></h2>
<p>To provide you quickly with a functional application, your own multiple core
machine can be used directly and without any configuration to distribute
computation.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://brainvisa.info/soma-workflow">Soma-workflow main page</a> for installation.</p>
</div>
<p>Soma-workflow runs as a regular mono process application on your local machine.
In this configuration Soma-workflow should not be stopped while workflows or jobs
are running. If the application is closed, the workflow execution is stopped and
the current running jobs might be lost if you are using a cluster (on some
systems you will need to kill the jobs using the DRMS command). However, you
will be able to restart the workflow in an other session.</p>
<p>Soma-workflow can be used as a mono process application on clusters too (see
<a class="reference internal" href="install_config.html#light-mode-config"><em>configuration and installation section</em></a>). The
application must run on a machine which is configured for submission.</p>
</div>
<div class="section" id="more-features-with-the-client-server-application">
<span id="client-server-application-concept"></span><h2><a class="toc-backref" href="#id4">More features with the client-server application</a><a class="headerlink" href="#more-features-with-the-client-server-application" title="Permalink to this headline">¶</a></h2>
<p>Compared to the mono process application, the client-server mode introduces two interesting
features:</p>
<ul class="simple">
<li><strong>Remote access</strong> to computing resource through a client application.</li>
<li><strong>Disconnections</strong>: the client application can be closed at any time, it won&#8217;t stop the execution of workflows.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="images/architecture_overview.png"><img alt="images/architecture_overview.png" src="images/architecture_overview.png" style="width: 570.0px; height: 340.0px;" /></a>
<p class="caption"><em>Overview of soma-workflow architecture in the client-server mode</em></p>
</div>
<p>There are three main processes in the client-server mode:</p>
<ul class="simple">
<li>The <strong>workflow controller</strong> process runs on the client side (on the user
machine). When it is started, it connects to the remote machine and creates
a workflow engine process. The two processes communicate together through a
secured channel (ssh tunnel).</li>
<li>The <strong>workflow engine</strong> runs on the computing resource side with the user&#8217;s
rights (no admin rights). It processes the submitted workflows, submit,
control and monitor jobs. It also updates the soma-workflow database at
regular time interval with the status of the jobs, workflows and file
transfers.</li>
<li>The <strong>workflow database server</strong> runs on the computing resource side as a
soma-workflow administrator user (no need to be the root user, not any
special rights are needed). It stores and queries all the informations
about file transfers, jobs and workflows, to and from the soma-workflow
database file.</li>
</ul>
<p>When the client application is closed (the workflow controller process stops),
the workflow engine process keeps on running until the submitted workflows and
jobs are done.</p>
<p>Each time a client application starts, a workflow engine process is created on
the computing resource side. If no workflow or job were submitted with the
client application or if they all ended, the workflow engine process stops as
soon as the client application is closed.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">configuration and installation section for the <a class="reference internal" href="install_config.html#server"><em>server</em></a> and the <a class="reference internal" href="install_config.html#client-intall-config"><em>client</em></a></p>
</div>
<div class="section" id="file-transfer">
<span id="file-transfers-concept"></span><h3><a class="toc-backref" href="#id5">File Transfer</a><a class="headerlink" href="#file-transfer" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The file transfers are optional. However, they can be useful when the user&#8217;s file
system is not shared with the computing resource.</p>
<p>The file transfer objects allow the transfer of files or directories to and from
the computing resource file system.</p>
<p>A file transfer object is a mapping between a file path which is valid on
the user file system and a file path which is valid on the computing resource
file system. There is no need for the user to specify a valid path on the
computing resource. Soma-workflow handles the choice of this path within a
configured directory.</p>
<p>The file transfer object can be used instead of any regular path in the
definitions of jobs and workflows.
The jobs using file transfers in their program command line, has to state
which file transfers are input, output or both. That way soma-workflow
waits for all the input files to exist on the computing resource before
submitting the job to the resource.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="examples.html#file-transfer-examples"><em>file transfer examples</em></a> in the example section.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="shared-resource-path">
<span id="shared-resource-path-concept"></span><h3><a class="toc-backref" href="#id6">Shared Resource Path</a><a class="headerlink" href="#shared-resource-path" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>As file transfers, shared resource paths are optional but can be useful when
the user&#8217;s file system is not shared by the computing resource. Shared Resource
Path are useful when a your data was already transfered on the computing resource
side.</p>
<p>Shared resource path objects can be used instead of any regular path in the
definition of jobs and workflows. Soma-workflow looks up into translation
files configured on the computing resource side to recover the corresponding
valid path.</p>
<p>Several translation files can be configured, and each of them is associated to
a namespace (see <a class="reference internal" href="install_config.html#conf-server-option"><em>Configuration items optional on the server side:</em></a>).</p>
<p>For example, if you want to configure file translation for an application &#8220;MyApp&#8221;,
you will configure the translation file &#8220;my_app_translation&#8221; under the namespace
&#8220;MyApp&#8221;. The content the translation file is a list of unique identifier
associated to directory paths. For examples:</p>
<div class="highlight-python"><pre>5ee1e9a0-5959-11e0-80e3-0800200c9a66  /home/myname/data_for_my_app/data1/
922ba490-5959-11e0-80e3-0800200c9a66  /home/myname/data_for_my_app/data2/
a7623ef0-5959-11e0-80e3-0800200c9a66  /home/myname/data_for_my_app/data3/</pre>
</div>
<p>One can use more simple identifiers since each translation file is included
into a namespace:</p>
<div class="highlight-python"><pre>data1_dir  /home/myname/data_for_my_app/data1/
data2_dir  /home/myname/data_for_my_app/data2/
data3_dir  /home/myname/data_for_my_app/data3/</pre>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="examples.html#shared-resource-path-examples"><em>shared resource path examples</em></a> in the example section.</p>
</div>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="static/logo_white_small.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Soma-workflow concepts</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#quick-start-with-the-mono-process-application">Quick start with the mono process application</a></li>
<li><a class="reference internal" href="#more-features-with-the-client-server-application">More features with the client-server application</a><ul>
<li><a class="reference internal" href="#file-transfer">File Transfer</a></li>
<li><a class="reference internal" href="#shared-resource-path">Shared Resource Path</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Soma-workflow: A unified and simple interface to parallel computing resource</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="gui.html"
                        title="next chapter">Graphical User Interface</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/concepts.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="gui.html" title="Graphical User Interface"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Soma-workflow: A unified and simple interface to parallel computing resource"
             >previous</a> |</li>
        <li><a href="index.html">soma-workflow developement version documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011 CEA, Neurospin, France, CATI, France.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>