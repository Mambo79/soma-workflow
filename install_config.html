

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation and configuration &mdash; soma-workflow developement version documentation</title>
    
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="shortcut icon" href="static/icon_small.png"/>
    <link rel="top" title="soma-workflow developement version documentation" href="index.html" />
    <link rel="prev" title="Python API" href="client_API.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="client_API.html" title="Python API"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">soma-workflow developement version documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation-and-configuration">
<h1>Installation and configuration<a class="headerlink" href="#installation-and-configuration" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="id1">
<p class="topic-title first">Installation and Configuration</p>
<ul class="simple">
<li><a class="reference internal" href="#mono-process-application-on-a-multiple-core-machine" id="id19">Mono process application on a multiple core machine</a></li>
<li><a class="reference internal" href="#client-server-application-client" id="id20">Client-server application: Client</a></li>
<li><a class="reference internal" href="#client-server-application-server" id="id21">Client-server application: Server</a></li>
<li><a class="reference internal" href="#mono-process-application-on-clusters" id="id22">Mono process application on clusters</a></li>
</ul>
</div>
<div class="section" id="mono-process-application-on-a-multiple-core-machine">
<h2><a class="toc-backref" href="#id19">Mono process application on a multiple core machine</a><a class="headerlink" href="#mono-process-application-on-a-multiple-core-machine" title="Permalink to this headline">¶</a></h2>
<p><strong>No configuration is needed to use Soma-workflow on a multiple core machine.</strong></p>
<p>See <a class="reference external" href="http://brainvisa.info/soma-workflow">Soma-workflow main page</a> for installation.</p>
</div>
<div class="section" id="client-server-application-client">
<span id="client-intall-config"></span><h2><a class="toc-backref" href="#id20">Client-server application: Client</a><a class="headerlink" href="#client-server-application-client" title="Permalink to this headline">¶</a></h2>
<p>This page describes the installation and configuration of the Soma-workflow
client. The installation of a Soma-workflow client supposes that at least one
Soma-workflow database servers is installed on a remote or a local computing
resources (see <a class="reference internal" href="#server"><em>Client-server application: Server</em></a>).</p>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Python <em>version 2.5 or more</em></li>
<li><a class="reference external" href="http://www.xs4all.nl/~irmen/pyro3/">Pyro</a> <em>version 3.10 or more</em></li>
<li><a class="reference external" href="http://www.lag.net/paramiko/">Paramiko</a> <em>version 1.7 or more</em>. Paramiko in
only required if the computing resource is remote.</li>
<li>For the GUI: Qt <em>version 4.6.2 or more</em>, <a class="reference external" href="http://www.riverbankcomputing.co.uk/software/pyqt/intro">PyQt</a> <em>version 4.7.2 or more</em>, or <a class="reference external" href="http://www.pyside.org">PySide</a> <em>version 1.1.1 or more</em> and optionally <a class="reference external" href="http://matplotlib.sourceforge.net/">matplotlib</a> <em>version 0.99 or more</em></li>
</ul>
</div>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Download: <a class="reference external" href="ftp://ftp.cea.fr/pub/dsv/anatomist/binary/soma-workflow-2.2.tar.bz2">soma-workflow 2.2</a></p>
</li>
<li><p class="first">Installation:</p>
<blockquote>
<div><div class="highlight-python"><pre>$ python setup.py build

$ python setup.py install --prefix my_directory
or
$ sudo python setup.py install</pre>
</div>
</div></blockquote>
</li>
<li><p class="first">Create a configuration file (see <a class="reference internal" href="#client-configuration"><em>Configuration</em></a>) at the location $HOME/.soma-workflow.cfg. You can also choose your own path for the configuration file and set the &#8220;SOMA_WORKFLOW_CONFIG&#8221; environment variable or put it in the /etc/ directory.</p>
</li>
</ol>
<p>Start the GUI with the command <em>soma_workflow_gui</em> and/or import the soma.workflow.client module to use the Python API.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="gui.html#gui"><em>Graphical User Interface</em></a> for the GUI documentation, <a class="reference internal" href="client_API.html#client-api"><em>Python API</em></a> for Soma-workflow Python API documentation and <a class="reference internal" href="examples.html#examples"><em>Examples</em></a>.</p>
</div>
</div>
<div class="section" id="configuration">
<span id="client-configuration"></span><h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>The configuration syntax is the <a class="reference external" href="http://docs.python.org/library/configparser.html">ConfigParser</a>  syntax.</p>
<p>There is one section for each computing resource (that is for each Soma-workflow
database server).</p>
<p>Only four items are required:</p>
<blockquote>
<div><ul class="simple">
<li>CLUSTER_ADDRESS</li>
<li>SUBMITTING_MACHINES</li>
<li>QUEUES</li>
<li>LOGIN</li>
</ul>
</div></blockquote>
<p>The two first items are mandatory and the last ones are
optional. The values of these configuration items are set up at each
Soma-workflow server installation (see <a class="reference internal" href="#server-configuration"><em>Server configuration</em></a>). Ask these item
values to the Soma-workflow administrator if you did not install the server yourself.</p>
<p>Configuration file example (2 computing resources are configured):</p>
<div class="highlight-python"><pre>[Titan]

CLUSTER_ADDRESS     = titan.mylab.fr
SUBMITTING_MACHINES = titan0

QUEUES = test long
LOGIN = my_login_on_titan


[LabDesktops]

CLUSTER_ADDRESS     = mydesktop.mylab.fr
SUBMITTING_MACHINES = mydesktop</pre>
</div>
<p><em>Configuration items required on the client side</em></p>
<blockquote>
<div><dl class="docutils">
<dt><strong>CLUSTER_ADDRESS</strong></dt>
<dd>Address of the host computing resource host to log on.
Address of the host which has to be used to access the cluster remotely.</dd>
<dt><strong>SUBMITTING_MACHINES</strong></dt>
<dd>Address of the submitting hosts, that is the hosts from which the jobs
are supposed to be submitted. In most of the cases, there is only one
submitting host. The addresses are local on the cluster.
Syntax: &#8220;host1 host2 host3&#8221;</dd>
</dl>
</div></blockquote>
<p id="conf-client-option"><em>Configuration items optional on the client side:</em></p>
<blockquote>
<div><dl class="docutils">
<dt><strong>QUEUES</strong></dt>
<dd>List of the available queues. This item is only used in the GUI to make
easier the selection of the queue when submitting a workflow.
Syntax: &#8220;queue1 queue2 queue3&#8221;</dd>
<dt><strong>LOGIN</strong></dt>
<dd>To pre-fill the login field in the GUI when login to the resource.</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="client-server-application-server">
<span id="server"></span><h2><a class="toc-backref" href="#id21">Client-server application: Server</a><a class="headerlink" href="#client-server-application-server" title="Permalink to this headline">¶</a></h2>
<p>This page explains how to configure, install and run the Soma-workflow
database server.</p>
<p>In the client-server mode the communication between the processes is done using
<a class="reference external" href="http://www.xs4all.nl/~irmen/pyro3/">Pyro</a>. The server is registered on a Pyro
name server. The Workflow Engines query the Pyro name server for the
location the database server.</p>
<div class="section" id="server-requirements">
<span id="id3"></span><h3>Requirements<a class="headerlink" href="#server-requirements" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="images/third_parties.png"><img alt="images/third_parties.png" src="images/third_parties.png" style="width: 584.0px; height: 291.2px;" /></a>
<p>Here is the list of the server dependencies:</p>
<ul class="simple">
<li>A distributed resource management system (DRMS) such as Grid Engine, Condor,
Torque/PBS, LSF..</li>
<li>A implementation of <a class="reference external" href="http://www.drmaa.org/">DRMAA</a> 1.0 for the DRMS in C</li>
<li>Python <em>version 2.5 or more</em></li>
<li><a class="reference external" href="http://wiki.python.org/moin/SIP">SIP</a> <em>version 4.10 or more</em></li>
<li><a class="reference external" href="http://www.xs4all.nl/~irmen/pyro3/">Pyro</a> <em>version 3.10 or more</em></li>
<li><a class="reference external" href="http://docs.python.org/library/sqlite3.html">SQLite</a> <em>version 3 or more</em></li>
</ul>
<p>The implementations of DRMAA tested successfully with Soma-workflow:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">DRMS</th>
<th class="head">DRMAA implementation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Torque 2.0.0</td>
<td><a class="reference external" href="http://sourceforge.net/projects/pbspro-drmaa/files/pbs-drmaa/1.0/">PBS DRMAA 1.0.13</a> from <a class="reference external" href="http://apps.man.poznan.pl/trac/pbs-drmaa">http://apps.man.poznan.pl/trac/pbs-drmaa</a></td>
</tr>
<tr class="row-odd"><td>LSF 7.0</td>
<td>FedStage LSF DRMAA 1.0.3</td>
</tr>
<tr class="row-even"><td>Grid Engine 6.2u5&amp;6</td>
<td>Embeded implementation</td>
</tr>
<tr class="row-odd"><td>Condor 7.4.0</td>
<td>Embeded implementation</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="installation-to-use-with-drmaa">
<span id="sip-drmaa"></span><h3>Installation to use with DRMAA<a class="headerlink" href="#installation-to-use-with-drmaa" title="Permalink to this headline">¶</a></h3>
<p>The use of Soma-workflow with DRMAA requires the generation of a SIP Python
binding for the DRMAA C library. This section describes a way to compile and
install this binding together with Soma-workflow:</p>
<ol class="arabic">
<li><p class="first">Download bv_maker (a CMake customization of the <a class="reference external" href="http://brainvisa.info">BrainVISA project</a>)</p>
<blockquote>
<div></div></blockquote>
</li>
</ol>
<blockquote>
<div><div class="highlight-python"><pre>svn --username brainvisa --password Soma2009 export https://bioproj.extra.cea.fr/neurosvn/brainvisa/source_views/brainvisa-cmake /tmp/brainvisa-cmake
cd /tmp/brainvisa-cmake
cmake -DCMAKE_INSTALL_PREFIX=. latest_release
make install</pre>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Create the file: $HOME/.brainvisa/bv_maker.cfg with the content:</li>
</ol>
<blockquote>
<div><div class="highlight-python"><pre>[source &lt;source_directory&gt;]
  + soma-workflow latest_release

[build &lt;build_directory&gt;]
  soma-workflow latest_release &lt;source_directory&gt;</pre>
</div>
<p>replacing &lt;source_directory&gt; and &lt;build_directory&gt; by the paths you choose
for Soma-workflow. For example:</p>
<div class="highlight-python"><pre>[source $HOME/soma-workflow/source]
  + soma-workflow latest_release

[build $HOME/soma-workflow/build]
  soma-workflow latest_release $HOME/soma-workflow/source</pre>
</div>
<p>Note that you can also replace &#8220;latest_release&#8221; to obtain another version: for
example: &#8220;2.1.0&#8221; or trunk&#8221; for the version in development or &#8220;bug_fix&#8221;
for the bug fixes of the latest release.</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Download Soma-workflow sources (use username &#8220;brainvisa&#8221; and password &#8220;Soma2009&#8221; if needed), configure and build with CMake and make:</li>
</ol>
<blockquote>
<div><div class="highlight-python"><pre>/tmp/brainvisa-cmake/bin/bv_maker sources

/tmp/brainvisa-cmake/bin/bv_maker configure

/tmp/brainvisa-cmake/bin/bv_maker build</pre>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>You can remove the temporary directory</li>
</ol>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">brainvisa</span><span class="o">-</span><span class="n">cmake</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Set the environment variables:</li>
</ol>
<blockquote>
<div><div class="highlight-python"><pre>. &lt;build_directory&gt;/bin/bv_env.sh &lt;build_directory&gt;</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="server-creation">
<span id="server-installation"></span><h3>Server creation<a class="headerlink" href="#server-creation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Install the Soma-workflow python modules and generate the SIP Python binding for the DRMAA C library if needed. (see <a class="reference internal" href="#sip-drmaa"><em>Installation to use with DRMAA</em></a>)</li>
<li>Choose a resource identifier for the computing resource, ex: &#8220;Titan&#8221;</li>
<li>Create a configuration file (see <a class="reference internal" href="#server-configuration"><em>Server configuration</em></a>) at the location $HOME/.soma-workflow.cfg. You can also choose your own path for the configuration file and set the &#8220;SOMA_WORKFLOW_CONFIG&#8221; environment variable with this path or put it in the /etc/ directory.</li>
</ol>
<ol class="arabic simple" start="2">
<li>Start a Pyro name server with the command pyro-ns -m</li>
</ol>
<ol class="arabic simple" start="4">
<li>Run the command python -m soma.workflow.start_database_server &#8220;Titan&#8221;. The command will:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>start the database server</li>
<li>create the SQLite database if the database file does not exist</li>
<li>register the database server to the Pyro name server</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="server-configuration">
<span id="id5"></span><h3>Server configuration<a class="headerlink" href="#server-configuration" title="Permalink to this headline">¶</a></h3>
<p>This section defines the required and optional configuration items.</p>
<p>The configuration file syntax is the <a class="reference external" href="http://docs.python.org/library/configparser.html">ConfigParser</a>  syntax. All the configuration items are defined in one section. The name of
the section is the resource identifier (ex: &#8220;Titan&#8221;).</p>
<p>Configuration file example:</p>
<div class="highlight-python"><pre>[Titan]

DATABASE_FILE        = path/soma_workflow.db
TRANSFERED_FILES_DIR = path/transfered_files
NAME_SERVER_HOST     = titan0
SERVER_NAME          = soma_workflow_server_for_titan

# optional limitation of the jobs in various queues
MAX_JOB_IN_QUEUE = {10} test{50} long{3}

# optional logging
SERVER_LOG_FILE   = path/logs/log_server
SERVER_LOG_FORMAT = %(asctime)s =&gt; line %(lineno)s: %(message)s
SERVER_LOG_LEVEL  = ERROR
ENGINE_LOG_DIR    = path/logs/
ENGINE_LOG_FORMAT = %(asctime)s =&gt; line %(lineno)s: %(message)s
ENGINE_LOG_LEVEL  = ERROR

# remote access information
CLUSTER_ADDRESS     = titan.mylab.fr
SUBMITTING_MACHINES = titan0</pre>
</div>
<div class="section" id="configuration-items-required-on-the-server-side">
<h4>Configuration items required on the server side:<a class="headerlink" href="#configuration-items-required-on-the-server-side" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><dl class="docutils">
<dt><strong>DATABASE_FILE</strong></dt>
<dd>Path of the SQLite database file. The file will be created the first time
the database server will be started.</dd>
<dt><strong>TRANSFERED_FILES_DIR</strong></dt>
<dd><p class="first">Path of the directory where the transfered files will be copied. The
directory must be empty and will be managed entirely by Soma-workflow.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not copy any file in this directory. Soma_workflow manages the
entire directory and might delete any external file.</p>
</div>
</dd>
<dt><strong>NAME_SERVER_HOST</strong></dt>
<dd>Host where the Pyro name server runs.</dd>
<dt><strong>SERVER_NAME</strong></dt>
<dd>Name of the database server regitered on the Pyro name server.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="configuration-items-optional-on-the-server-side">
<span id="conf-server-option"></span><h4>Configuration items optional on the server side:<a class="headerlink" href="#configuration-items-optional-on-the-server-side" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><dl class="docutils">
<dt><strong>MAX_JOB_IN_QUEUE</strong></dt>
<dd>Maximum number of job in each queue. If a queue does not appear here,
Soma-workflow considers that there is no limitation.
The syntax is &#8220;{default_queue_max_nb_jobs} queue_name1{max_nb_jobs_1} queue_name_2{max_nb_job_2}&#8221;. Example: &#8220;{5} test{20}&#8221;</dd>
<dt><strong>PATH_TRANSLATION_FILES</strong></dt>
<dd>Specify here the shared resource path translation files, mandatory to use
the SharedResourcePath objects (see <a class="reference internal" href="concepts.html#shared-resource-path-concept"><em>Shared Resource Path</em></a>).
Each translation file is associated with a namespace. That way several
applications can use the same  identifiers without risk.
The syntax is &#8220;namespace_1{translation_file_path_11}
namespace1{translation_file_path_12} namespace2{translation_file_path_2}&#8221;</dd>
<dt><strong>DRMAA_IMPLEMENTATION</strong></dt>
<dd>Set this item to &#8220;PBS&#8221; if you use FedStage PBS DRMAA 1.0 implementation,
otherwise it does not has to be set.
Soma-workflow is designed to be independent of the DRMS and the DRMAA
implementation. However, we found two bugs in the FedStage PBS DRMAA 1.0
implementation, and correct it temporarily writing specific code for this
implementation in Soma-workflow at 2 locations (soma.workflow.engine Drmaa
class: __init__ and submit_job method).</dd>
<dt><strong>NATIVE_SPECIFICATION</strong></dt>
<dd><p class="first">Some specific option/function of the computing resource you want to use
might not be available among the list of Soma-workflow Job attributes.
Use the native specification attribute to use these specific functionalities.
Once configured it will be applied to every jobs submitted to the resource
unless a different value is specified in the Job attribute native_specification.</p>
<dl class="last docutils">
<dt><em>Example:</em> Specification of a job walltime and more:</dt>
<dd><ul class="first last simple">
<li>using a PBS cluster: NATIVE_SPECIFICATION= -l walltime=10:00:00,pmem=16gb</li>
<li>using a SGE cluster: NATIVE_SPECIFICATION= -l h_rt=10:00:00</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>Logging configuration:</p>
<blockquote>
<div><dl class="docutils">
<dt><strong>SERVER_LOG_FILE</strong></dt>
<dd>Server log file path.</dd>
<dt><strong>SERVER_LOG_LEVEL</strong></dt>
<dd>Server logging level as defined in the <a class="reference external" href="http://docs.python.org/library/logging.html">logging</a> module.</dd>
<dt><strong>SERVER_LOG_FORMAT</strong></dt>
<dd>Server logging format as defined in the <a class="reference external" href="http://docs.python.org/library/logging.html">logging</a> module.</dd>
<dt><strong>ENGINE_LOG_DIR</strong></dt>
<dd>Directory path where to store Workflow Engine log files.</dd>
<dt><strong>ENGINE_LOG_LEVEL</strong></dt>
<dd>Workflow Engine logging level as defined in the <a class="reference external" href="http://docs.python.org/library/logging.html">logging</a> module.</dd>
<dt><strong>ENGINE_LOG_FORMAT</strong></dt>
<dd>Workflow Engine logging level as defined in the <a class="reference external" href="http://docs.python.org/library/logging.html">logging</a> module.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="parallel-job-configuration">
<h4>Parallel job configuration:<a class="headerlink" href="#parallel-job-configuration" title="Permalink to this headline">¶</a></h4>
<p>The items described here concern the parallel job configuration. A parallel job
uses several CPUs and involves parallel code: MPI, OpenMP for example.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The documentation is under construction.</p>
</div>
</div>
</div>
</div>
<div class="section" id="mono-process-application-on-clusters">
<span id="light-mode-config"></span><h2><a class="toc-backref" href="#id22">Mono process application on clusters</a><a class="headerlink" href="#mono-process-application-on-clusters" title="Permalink to this headline">¶</a></h2>
<p>This mode is called light mode, it is the installation you need if you are
not interested in the remote access and disconnection features (see <a class="reference internal" href="concepts.html#client-server-application-concept"><em>More features with the client-server application</em></a>)</p>
<div class="section" id="id10">
<h3>Requirements<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>The requirements are identical to the server installation requirements.
If you do not intend to access an other computing resource with the remote
access feature, the installation of Pyro can be skipped.</p>
<p>The requirements are thus:</p>
<ul class="simple">
<li>A distributed resource management system (DRMS) such as Grid Engine, Condor,
Torque/PBS, LSF..</li>
<li>A implementation of <a class="reference external" href="http://www.drmaa.org/">DRMAA</a> 1.0 for the DRMS in C</li>
<li>Python <em>version 2.5 or more</em></li>
<li><a class="reference external" href="http://wiki.python.org/moin/SIP">SIP</a> <em>version 4.10 or more</em></li>
<li>SQLite <em>version 3 or more</em></li>
<li>For the GUI: Qt <em>version 4.6.2 or more</em>, <a class="reference external" href="http://www.riverbankcomputing.co.uk/software/pyqt/intro">PyQt</a> <em>version 4.7.2 or more</em>, or <a class="reference external" href="http://www.pyside.org">PySide</a> <em>version 1.1.1</em> or more, and optionally <a class="reference external" href="http://matplotlib.sourceforge.net/">matplotlib</a> <em>version 0.99 or more</em></li>
</ul>
<p>More details about the implementation of DRMAA can be found in the server
installation section (see <a class="reference internal" href="#server-requirements"><em>Requirements</em></a>).</p>
</div>
<div class="section" id="id16">
<h3>Installation<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Install the Soma-workflow python modules and generate the SIP Python binding for the DRMAA C library if needed. (see <a class="reference internal" href="#sip-drmaa"><em>Installation to use with DRMAA</em></a>)</li>
<li>Choose a resource identifier for the computing resource, ex: &#8220;Local Titan&#8221;</li>
<li>Create a configuration file (see <a class="reference internal" href="#light-mode-configuration"><em>Configuration</em></a>) at the location $HOME/.soma-workflow.cfg. You can also choose your own path for the configuration file and set the &#8220;SOMA_WORKFLOW_CONFIG&#8221; environment variable with this path or put it in the /etc/ directory.</li>
</ol>
<p>Start the GUI with the command <em>soma_workflow_gui</em> and/or import the soma.workflow.client module to use the Python API.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="gui.html#gui"><em>Graphical User Interface</em></a> for the GUI documentation, <a class="reference internal" href="client_API.html#client-api"><em>Python API</em></a> for Soma-workflow Python API documentation and <a class="reference internal" href="examples.html#examples"><em>Examples</em></a>.</p>
</div>
</div>
<div class="section" id="light-mode-configuration">
<span id="id17"></span><h3>Configuration<a class="headerlink" href="#light-mode-configuration" title="Permalink to this headline">¶</a></h3>
<p>This section defines the required and optional configuration items for the light
mode.</p>
<p>The configuration file syntax is the <a class="reference external" href="http://docs.python.org/library/configparser.html">ConfigParser</a>  syntax. All the
configuration items are defined in one section. The section name corresponds to
the name you chose for the resource: &#8220;Local Titan&#8221; in the example.</p>
<p>Configuration file example:</p>
<div class="highlight-python"><pre>[Local Titan]

LIGHT_MODE    = True

TRANSFERED_FILE_DIR = path/soma_workflow.db
DATABASE_FILE       = path/transfered_files</pre>
</div>
<p><em>Required configuration items:</em></p>
<blockquote>
<div><dl class="docutils">
<dt><strong>LIGHT_MODE</strong></dt>
<dd>This item can be set up with any value, however it must be defined to use
soma_workflow in the light mode.</dd>
<dt><strong>DATABASE_FILE</strong></dt>
<dd>Path of the SQLite database file. The file will be created the first time
the application is launch.</dd>
<dt><strong>TRANSFERED_FILE_DIR</strong></dt>
<dd><p class="first">Path of the directory where the transfered files will be copied. The
directory must be empty and will be managed entirely by Soma-workflow.
This item is required to let you run workflow with file transfer for
test purposes in the light mode.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not copy any file in this directory. Soma_workflow manages the
entire directory and might delete any external file.</p>
</div>
</dd>
</dl>
</div></blockquote>
<p><em>Optional configuration items:</em></p>
<blockquote>
<div>Many optional configuration item can be added to customize the installation, see
<a class="reference internal" href="#server-configuration"><em>Server configuration</em></a> for a full list of the items and their description.</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="static/logo_white_small.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation and configuration</a><ul>
<li><a class="reference internal" href="#mono-process-application-on-a-multiple-core-machine">Mono process application on a multiple core machine</a></li>
<li><a class="reference internal" href="#client-server-application-client">Client-server application: Client</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#client-server-application-server">Client-server application: Server</a><ul>
<li><a class="reference internal" href="#server-requirements">Requirements</a></li>
<li><a class="reference internal" href="#installation-to-use-with-drmaa">Installation to use with DRMAA</a></li>
<li><a class="reference internal" href="#server-creation">Server creation</a></li>
<li><a class="reference internal" href="#server-configuration">Server configuration</a><ul>
<li><a class="reference internal" href="#configuration-items-required-on-the-server-side">Configuration items required on the server side:</a></li>
<li><a class="reference internal" href="#configuration-items-optional-on-the-server-side">Configuration items optional on the server side:</a></li>
<li><a class="reference internal" href="#parallel-job-configuration">Parallel job configuration:</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#mono-process-application-on-clusters">Mono process application on clusters</a><ul>
<li><a class="reference internal" href="#id10">Requirements</a></li>
<li><a class="reference internal" href="#id16">Installation</a></li>
<li><a class="reference internal" href="#light-mode-configuration">Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="client_API.html"
                        title="previous chapter">Python API</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/install_config.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="client_API.html" title="Python API"
             >previous</a> |</li>
        <li><a href="index.html">soma-workflow developement version documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011 CEA, Neurospin, France, CATI, France.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>